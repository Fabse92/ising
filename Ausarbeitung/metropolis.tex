
Das Programm simuliert das Ising Modell auf einem Gitter vorgegebener Länge $N$ und Dimension $d$ mittels Monte Carlo Verfahren. Dabei können sowohl eine als auch mehrere Simulationen zu unterschiedlichen Parameterwerten durchgeführt werden. Jede Simulation besteht dabei aus $n$ Monte Carlo Schritten oder steps. Darin werden $N^{d}$ potentielle Spinflips betrachtet, welche je nach Flipwahrscheinlichkeit akzeptiert oder abgelehnt werden. Die Flipwahrscheinlichkeit ergibt sich aus Differenz der inneren Energien beider Zustände. Für unsere Simulation berachten die Kopplungskonstante in “Nächster-Nachbarn”-Näherung mit $J=1$. Die Boltzmannkonstante wird ebenfalls mit $k_{b}=1$ eingerechnet. 
Alle Parameter der Simulation, sowie die Auswahl der Programmmodi, welche das Zusammenspiel der einzelnen Simulationen bestimmen, werden beim Programmaufruf übergeben. Die Zufallszahlen im Programm werden mit einem Mersenne-Twister Pseudozufallszahlengenerator erzeugt. Das Programm ist in C geschrieben.


\subsection{Monte Carlo Schritt im Metropolis Schema}

Zunächst wird für die Flipwahrscheinlichkeit $W_{ij}$ mittels Metropolis-Schema berechnet. Die Wahrscheinlichkeit, dass sich das System im Zustand $i$ befindet ergibt sich nach $P_{i}=\frac{1}{Z_{k}}\dot e^{-\beta E_{i}}$. Dabei bezeichnet $Z_{k}$ die kanonische Zustandsumme des Systems, $E_{i}$ die innere Energie des Systems in Zustand $i$. Daraus folgt für die Flipwahrscheinlichkeit
\begin{equation}
W_{ij}=min\{1,\frac{P_{j}}{P_{i}}\}=min\{1,e^{\beta \Delta E}\}
\end{equation}
mit $\Delta E=E_{i}-E_{j}$. Somit wird jede Energieminimierung akzeptiert, jede Energieerhöhung nur zu einer gewissen Wahrscheinlichkeit. 


Somit läuft ein Flip während eines Monte Carlo Schritts wie folgt ab:\\
Zunächst befindet sich das System im Zustand $i$. Dann wird ein zufälliger Spin $S_{k}$ ausgewählt. Danach wird die Energiedifferenz $\Delta E$ zwischen Energie im Zustand $i$ mit $S_{k}$ und die Energie im Zustand $j$ mit $-S_{k}$, also dem gefliptem Spin berechnet. Diese berechnet sich im hier verwendetem Ising-Modell über $\Delta E=2S_{k}(B+\sum_{i=1}^{d}S_{k-1}+S_{k+1})$. Die Berücksichtigung des Magnetfelds $B$ spielt bei unsere Betrachtung eine große Rolle, weshalb der Metropolisalgorithmus verwendet wurde. Eine Alternative ohne äußeres Feld wird in Kapitel \ref{cluster} dargestellt. Der Spinflip wird der Wahrscheinlichkeit $W(S_k \rightarrow -S_k)=min\{ 1, e^{\frac{\Delta E}{T}} \}$. Im Falle einer Energieerhöhung wird der Spinflip ausgeführt, falls die Flipwahrscheinlichkeit $e^{\frac{\Delta E}{T}}$ größer als eine Zufallszahl $R\in[0,1]$.


\subsection{Im Detail: Konvergenz von makroskopischen Größen im Metropolis Algorithmus}

Durch die Temperaturabhängigkeit der Flipwahrscheinlichkeit $W_{ij}$ konvergiert die Energie im Verlauf einer Simulation gegen einen bestimmten Energiewert $E_{n}$, welcher äquivalent zum Minimum der freien Energie $F=E-TS$ ist. Daraus folgt das auch der Zustand bis auf mikroskopische Fluktuationen bzw. die Magnetisierung des Systems und damit auch die durchschnittliche Magnetisierung pro Spin konvergent ist. Diese konvergiert für verschiedene Startkonfigurationen sowohl für ein zwei- als auch dreidimensionales Gitter (Abb.\ref{} und \ref{}). Hier wurden jeweils der Verlauf der Magnetisierung des Systems über 1000 Monte Carlo Schritte aus einer rein positiven Startkonfiguration und einer zufälligen Startkonfiguration für verschiedene Temperaturen $T$ betrachtet. Je niedriger die Temperatur, desto höher ist der absolute Wert...
\begin{figure}[H]
	\centering
	\subfigure[zufällige Startkonfiguration]{
		\includegraphics[width=0.47\textwidth]{../Graph_Export/MP2D/m(Steps)_r.jpg}
}	
	\subfigure[positv parallele Startkonfiguration]{
		\includegraphics[width=0.47\textwidth]{../Graph_Export/MP2D/m(Steps)_p.jpg}
}		
	\caption{Konvergenzverhalten der Magnetisierung im Metropolisalgorithmus für ein zweidimensionales Gitter}
	\label{mp2dkonv}
\end{figure}
\begin{figure}[H]
	\centering
	\subfigure[zufällige Startkonfiguration]{
		\includegraphics[width=0.47\textwidth]{../Graph_Export/MP3D/m(Steps)_r.jpg}
}	
	\subfigure[positv parallele Startkonfiguration]{
		\includegraphics[width=0.47\textwidth]{../Graph_Export/MP3D/m(Steps)_p.jpg}
}		
	\caption{Konvergenzverhalten der Magnetisierung im Metropolisalgorithmus für ein dreidimensionales Gitter}
	\label{mp3dkonv}
\end{figure}

bilder aus Filmen...

\subsection{Im Detail: Funktion weiterer Parameter}

Außer der Wahl der Gittergröße, der Anzahl an Monte-Carlo-Schritten und der Dimension (2D oder 3D) bietet das Programm noch weitere Parameter, mit denen verschiedene Simulationsmodi gestartet werden können.\\
Um nicht nur den Einfluss der Temperatur, sondern auch den des äußeren Magnetfeldes untersuchen zu können, gibt es die Möglichkeit, die zwischen den verschiedenen Simulationen zu variierende Größe zu wählen. So wird entweder der Tempeartur- oder der Magnetfeldbereich zwischen dem als Parameter angegebenen Start- und Endwert mit einer ebenfalls angegebenen Schrittweite durchlaufen.\\
Möchte man das Schaltverhalten des Systems untersuchen, stellt man mit Hilfe eines Parameters ein, dass bei der Variation des Magnetfeldes nicht bei jeder neuen Feldstärke ein zufälliges neues Gitter erstellt wird, sondern auf dem vorhandenen weitergearbeitet wird. Außerdem wird in diesem Fall der angegebene Bereich nicht nur in eine Richtung durchlaufen, sondern anschließend auch zurück, sodass eine Hysterese erkennbar werden kann.\\
Dazu ist es noch möglich, mit einem vollständig ausgerichteten Gitter zu beginnen, sowie die Cluster-Update-Methode zu verwenden oder nicht und zur Veranschaulichung des Systems, einige Zwischenergebnisse als Dateien zu speichern.
